<!DOCTYPE html>
<html>
<head>
<title>Apex AI</title>
<style>
body {font-family: sans-serif;background:#111;margin:0;color:white;}
#chat{height:85vh;overflow-y:auto;padding:15px;}
.msg{padding:10px 15px;border-radius:10px;margin:8px 0;max-width:75%;}
.me{background:#4caf50;margin-left:auto;}
.bot{background:#333;margin-right:auto;}
#bar{position:fixed;bottom:0;width:100%;background:#000;padding:10px;display:flex;gap:10px;}
input{flex:1;padding:10px;font-size:17px;border-radius:6px;border:none;}
button{padding:10px 18px;font-size:17px;background:#4caf50;border:none;border-radius:6px;color:white;cursor:pointer;}
</style>
</head>

<body>
<div id="chat"></div>

<div id="bar">
    <input id="msg" placeholder="Type message..." onkeydown="if(event.key==='Enter')send()">
    <button onclick="send()">Send</button>
</div>

<script>
function add(cls,text){
    let d=document.createElement("div")
    d.className="msg "+cls
    d.innerText=text
    document.getElementById("chat").appendChild(d)
    document.getElementById("chat").scrollTop = 999999
}

async function send(){
    let m=document.getElementById("msg").value.trim()
    if(!m) return
    document.getElementById("msg").value=""
    add("me",m)

    let r=await fetch("/chat",{
        method:"POST",
        headers:{ "Content-Type":"application/x-www-form-urlencoded" },
        body:new URLSearchParams({message:m})
    })
    let data=await r.json()
    add("bot",data.reply)
}
</script>

</body>
</html>